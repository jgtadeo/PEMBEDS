window.headertag=window.headertag||{},window.headertag.partnerScopes=[],window.headertagconfig={siteId:167730,enableSingleRequest:!0,disableInitialLoad:!1,overrideGoogletag:!0,timeout:1e3,prefetch:{enabled:!0,pageTypeMapping:{},defaultSet:["0360959f-6336-da95-bcd4-aa3468d58bd0","a05f911f-5a7b-188a-0aec-0f81a9ec5abe","2c4c6298-d30b-53ff-8da5-41a566555561","e85a56da-3bb2-df24-df75-78dd50c2ba76","eb91f31b-8d29-b757-d543-005f4d649976"]},htSlots:{desktop:{"2c4c6298-d30b-53ff-8da5-41a566555561":{sizeMapping:{"0x0":[[300,250]]},deviceType:"desktop",divId:"gpt-ad-inline-med-1"},"a05f911f-5a7b-188a-0aec-0f81a9ec5abe":{sizeMapping:{"0x0":[[300,250]]},deviceType:"desktop",divId:"gpt-ad-inline-med-2"},"0360959f-6336-da95-bcd4-aa3468d58bd0":{sizeMapping:{"0x0":[[970,250],[728,90]]},deviceType:"desktop",divId:"gpt-ad-leaderboard"},"e85a56da-3bb2-df24-df75-78dd50c2ba76":{sizeMapping:{"0x0":[[160,600],[300,250],[300,600]]},deviceType:"desktop",divId:"gpt-ad-med-rectangle"},"eb91f31b-8d29-b757-d543-005f4d649976":{sizeMapping:{"0x0":[[300,601],[300,250],[300,600],[160,600]]},deviceType:"desktop",divId:"gpt-ad-sidebar-brand"}},mobile:{"82c106ac-897f-68ec-21f1-fa6fc0fe53ca":{sizeMapping:{"0x0":[[320,50],[300,250],[320,100]]},deviceType:"mobile",divId:"gpt-ad-m"},"9dd8663c-2f3d-f3cb-a0dd-a9806c87380b":{sizeMapping:{"0x0":[[300,250],[320,50],[320,100]]},deviceType:"mobile",divId:"gpt-ad-m-inline"},"6d9bfb23-9b38-d6dd-c6cd-e64b3f783b76":{sizeMapping:{"0x0":[[300,250],[320,50],[320,100]]},deviceType:"mobile",divId:"gpt-ad-m-rect"},"3fc4b63a-b3c2-0e91-3b9f-258e1ead1645":{sizeMapping:{"0x0":[[300,250],[320,50],[320,100]]},deviceType:"mobile",divId:"gpt-bottom1_m"},"0cf37d25-71a2-5088-0f8d-636ee12d882e":{sizeMapping:{"0x0":[[300,250],[320,100],[320,50]]},deviceType:"mobile",divId:"gpt-step1_m"}}},slotMappingTypes:["selectByStaticDivId"],partners:{INDX:{targetingType:"slot",prefetchEnabled:!0,timeout:1e3,disabled:!1,privateKey:"IPM",publicKey:"IOM"},SVRN:{targetingType:"slot",prefetchEnabled:!0,timeout:1e3,disabled:!1,roundingBuckets:{floor:0,inputCentsMultiplier:100,outputCentsDivisor:100,outputPrecision:2,roundingType:1,buckets:[{max:2e3,step:5}]},viewId:"instructables_auction_ap",informer:"13390459",xSlots:{1:{placementId:"355725",sizes:[[970,250]]},2:{placementId:"355728",sizes:[[728,90]]},3:{placementId:"355729",sizes:[[300,600]]},4:{placementId:"355730",sizes:[[300,250]]},5:{placementId:"355731",sizes:[[300,600]]},6:{placementId:"355735",sizes:[[300,250]]},7:{placementId:"355733",sizes:[[300,250]]},8:{placementId:"355734",sizes:[[300,250]]},9:{placementId:"355736",sizes:[[320,100]]},10:{placementId:"355737",sizes:[[320,50]]},11:{placementId:"355739",sizes:[[300,250]]},12:{placementId:"355743",sizes:[[300,250]]}},mapping:{"0360959f-6336-da95-bcd4-aa3468d58bd0":["1","2"],"e85a56da-3bb2-df24-df75-78dd50c2ba76":["3","4"],"eb91f31b-8d29-b757-d543-005f4d649976":["5","6"],"a05f911f-5a7b-188a-0aec-0f81a9ec5abe":["7"],"2c4c6298-d30b-53ff-8da5-41a566555561":["8"],"82c106ac-897f-68ec-21f1-fa6fc0fe53ca":["9","10"],"6d9bfb23-9b38-d6dd-c6cd-e64b3f783b76":["11"],"9dd8663c-2f3d-f3cb-a0dd-a9806c87380b":["12"]}},YBOT:{targetingType:"slot",prefetchEnabled:!0,timeout:1e3,disabled:!1,roundingBuckets:{floor:0,inputCentsMultiplier:1,outputCentsDivisor:100,outputPrecision:2,roundingType:1,buckets:[{max:2e3,step:5},{max:5e3,step:100}]},pub:{desktop:"56c9",mobile:"4752"},xSlots:{1:{id:"LB",sizes:[[728,90]]},2:{id:"MR",sizes:[[300,600],[300,250]]},3:{id:"MLB",sizes:[[320,50]]},4:{id:"mobrec",sizes:[[300,250]]},5:{id:"MR2",sizes:[[300,600],[300,250]]}},mapping:{"0360959f-6336-da95-bcd4-aa3468d58bd0":["1"],"e85a56da-3bb2-df24-df75-78dd50c2ba76":["2"],"82c106ac-897f-68ec-21f1-fa6fc0fe53ca":["3"],"6d9bfb23-9b38-d6dd-c6cd-e64b3f783b76":["4"],"eb91f31b-8d29-b757-d543-005f4d649976":["5"]}},SBI:{targetingType:"slot",timeout:1e3,prefetchEnabled:!0,disabled:!1,xSlots:{"sbi-gpt-ad-leaderboard":{sonobiKey:"68189f114565bd6b96ce"},"sbi-gpt-ad-med-rectangle":{sonobiKey:"abfff7dacc2c65d0dcd6"},"sbi-gpt-ad-sidebar-brand":{sonobiKey:"6e9426bf35cfe227e140"},"sbi-gpt-ad-inline-med-1":{sonobiKey:"211701bf355a6918c0c2"},"sbi-gpt-ad-inline-med-2":{sonobiKey:"62d06d585ba2ccd01cdf"},"sbi-gpt-ad-m":{sonobiKey:"7d15c985564f445de317"},"sbi-gpt-ad-m-rect":{sonobiKey:"0d851f03b80fae5e1912"},"sbi-gpt-ad-m-inline":{sonobiKey:"8ef9750836a37b21c7a8"}},mapping:{"0360959f-6336-da95-bcd4-aa3468d58bd0":["sbi-gpt-ad-leaderboard"],"e85a56da-3bb2-df24-df75-78dd50c2ba76":["sbi-gpt-ad-med-rectangle"],"eb91f31b-8d29-b757-d543-005f4d649976":["sbi-gpt-ad-sidebar-brand"],"2c4c6298-d30b-53ff-8da5-41a566555561":["sbi-gpt-ad-inline-med-1"],"a05f911f-5a7b-188a-0aec-0f81a9ec5abe":["sbi-gpt-ad-inline-med-2"],"82c106ac-897f-68ec-21f1-fa6fc0fe53ca":["sbi-gpt-ad-m"],"6d9bfb23-9b38-d6dd-c6cd-e64b3f783b76":["sbi-gpt-ad-m-rect"],"9dd8663c-2f3d-f3cb-a0dd-a9806c87380b":["sbi-gpt-ad-m-inline"]}}}},window.cygnus_index_args={name:"cygnus",embedMode:1,siteID:167730,slots:[{siteID:174896,width:970,height:250,id:"2"},{siteID:174903,width:300,height:250,id:"9"},{siteID:174897,width:300,height:250,id:"3"},{siteID:174898,width:300,height:600,id:"4"},{siteID:174901,width:300,height:250,id:"7"},{siteID:174902,width:300,height:250,id:"8"},{siteID:167730,width:728,height:90,id:"1"},{siteID:174904,width:300,height:600,id:"10"},{siteID:174899,width:320,height:50,id:"5"},{siteID:174900,width:320,height:100,id:"6"},{siteID:174905,width:300,height:250,id:"11"},{siteID:174906,width:300,height:250,id:"12"},{siteID:174907,width:300,height:250,id:"13"}],gpt_divs:{1:["0360959f-6336-da95-bcd4-aa3468d58bd0"],2:["0360959f-6336-da95-bcd4-aa3468d58bd0"],3:["e85a56da-3bb2-df24-df75-78dd50c2ba76"],4:["e85a56da-3bb2-df24-df75-78dd50c2ba76"],5:["82c106ac-897f-68ec-21f1-fa6fc0fe53ca"],6:["82c106ac-897f-68ec-21f1-fa6fc0fe53ca"],7:["2c4c6298-d30b-53ff-8da5-41a566555561"],8:["a05f911f-5a7b-188a-0aec-0f81a9ec5abe"],9:["eb91f31b-8d29-b757-d543-005f4d649976"],10:["eb91f31b-8d29-b757-d543-005f4d649976"],11:["6d9bfb23-9b38-d6dd-c6cd-e64b3f783b76"],12:["9dd8663c-2f3d-f3cb-a0dd-a9806c87380b"],13:["3fc4b63a-b3c2-0e91-3b9f-258e1ead1645"]},targetMode:2},function(){"use strict";function e(){}function t(e,t){return function(){e.apply(t,arguments)}}function r(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],s(e,this)}function n(e,t){for(;3===e._state;)e=e._value;if(0===e._state)return void e._deferreds.push(t);e._handled=!0;var r=1===e._state?t.onFulfilled:t.onRejected;if(null===r)return void(1===e._state?i:o)(t.promise,e._value);var n;try{n=r(e._value)}catch(e){return void o(t.promise,e)}i(t.promise,n)}function i(e,n){try{if(n===e)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==typeof n||"function"==typeof n)){var i=n.then;if(n instanceof r)return e._state=3,e._value=n,void a(e);if("function"==typeof i)return void s(t(i,n),e)}e._state=1,e._value=n,a(e)}catch(t){o(e,t)}}function o(e,t){e._state=2,e._value=t,a(e)}function a(e){2===e._state&&0===e._deferreds.length&&(e._handled||r._unhandledRejectionFn(e._value));for(var t=0,i=e._deferreds.length;t<i;t++)n(e,e._deferreds[t]);e._deferreds=null}function d(e,t,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=r}function s(e,t){var r=!1;try{e(function(e){r||(r=!0,i(t,e))},function(e){r||(r=!0,o(t,e))})}catch(e){if(r)return;r=!0,o(t,e)}}r.prototype.catch=function(e){return this.then(null,e)},r.prototype.then=function(t,r){var i=new this.constructor(e);return n(this,new d(t,r,i)),i},r.all=function(e){var t=Array.prototype.slice.call(e);return new r(function(e,r){function n(o,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var d=a.then;if("function"==typeof d)return void d.call(a,function(e){n(o,e)},r)}t[o]=a,0===--i&&e(t)}catch(e){r(e)}}if(0===t.length)return e([]);for(var i=t.length,o=0;o<t.length;o++)n(o,t[o])})},r.resolve=function(e){return e&&"object"==typeof e&&e.constructor===r?e:new r(function(t){t(e)})},r.reject=function(e){return new r(function(t,r){r(e)})},r._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console},r.defer=function(){var e={};return e.promise=new r(function(t,r){e.resolve=t,e.reject=r}),e},window.headertag.Promise=r}(),function(){"use strict";function e(){function e(e,t){return e===t}function t(e){return"[object Object]"===Object.prototype.toString.call(e)}function r(e){return"[object Array]"===Object.prototype.toString.call(e)}function n(e){return"number"==typeof e}function i(e){return n(e)&&e%1===0}function o(e){return"string"==typeof e}function a(e){return"boolean"==typeof e}function d(e){return"function"==typeof e}function s(e){if(o(e)){if(""!==e)return!1}else if(t(e)){for(var n in e)if(e.hasOwnProperty(n))return!1}else if(r(e)&&e.length)return!1;return!0}function l(e,t,r){return!("number"==typeof t&&e<t)&&!("number"==typeof r&&e>r)}function c(t,r,n){n||(n=e);for(var i=0;i<t.length;i++){for(var o=!1,a=0;a<r.length&&!(o=n(t[i],r[a]));a++);if(!o)return!1}return!0}function p(e,t){return!!(t&&!e||e&&"string"==typeof e)}function f(e,t){return!!(t&&!e||e&&"function"==typeof e)}function u(e,t){return!!(t&&!e||e&&r(e)&&e.length)}function g(e,t){return!!(t&&!e||e&&"object"==typeof e&&!s(e))}function h(e,t,r,n){return!!(n&&"number"!=typeof e||"number"==typeof e&&i(e)&&("number"!=typeof t||e>=t)&&("number"!=typeof r||e<=r))}function m(e,t){return!!(t&&"boolean"!=typeof e||"boolean"==typeof e)}function y(){return window.googletag&&window.googletag.apiReady?googletag.pubads().getSlots().slice():null}function v(e){for(var t=y(),r=0,n=t.length;r<n;r++)if(t[r].getSlotElementId()===e)return t[r];return null}function S(e){e||(e=y());for(var t={},r=0,n=e.length;r<n;r++)t[e[r].getSlotElementId()]=e[r];return t}function b(e){e||(e=y());for(var t=[],r=0,n=e.length;r<n;r++)t.push(e[r].getSlotElementId());return t}function w(){return(new Date).getTime()}function T(){return navigator.userAgent.indexOf("Mobi")!==-1?"mobile":"desktop"}function I(){var e="CSS1Compat"===window.top.document.compatMode?window.top.document.documentElement:window.top.document.body;return e.clientWidth}function D(){var e="CSS1Compat"===window.top.document.compatMode?window.top.document.documentElement:window.top.document.body;return e.clientHeight}function E(e,t){return e=e||"http:",t=t||"https:","https:"===document.location.protocol?t:e}function P(){try{return window.top.location.href}catch(e){return window.location.href}}function R(e,t,r){var n=document.createElement("script");n.type="text/javascript",n.async=t,n.src=("https:"===document.location.protocol?"https:":"http:")+e,n.onload=r,n.readyState&&(n.onreadystatechange=function(){"loaded"!==n.readyState&&"complete"!==n.readyState||(n.onreadystatechange=null,r())});var i=document.getElementsByTagName("script")[0];return i.parentNode.insertBefore(n,i),n}function x(e){var t="?";for(var r in e)e.hasOwnProperty(r)&&(t+=r+"="+e[r]+"&");return t.slice(0,-1)}function O(){return"_"+String((new Date).getTime()%2592e6)+String(Math.floor(16384*Math.random()))}function _(e){return e.length?e.splice(Math.floor(Math.random()*e.length),1)[0]:null}return{isObject:t,isArray:r,isNumber:n,isInteger:i,isString:o,isBoolean:a,isFunction:d,isEmpty:s,isInRange:l,isArraySubset:c,validateNonEmptyString:p,validateFunction:f,validateNonEmptyArray:u,validateNonEmptyObject:g,validateInteger:h,validateBoolean:m,getGSlots:y,getSlots:y,divIdToGSlot:v,divIdToSlot:v,getDivIdToGSlotMap:S,getDivIdToSlotMap:S,getGSlotDivIds:b,getDivIds:b,now:w,getDeviceTypeByUserAgent:T,getViewportWidth:I,getViewportHeight:D,getProtocol:E,getPageUrl:P,addScriptTag:R,objToQueryString:x,generateCorrelator:O,randomSplice:_}}var t=e();window.headertag.Utilities=t,window.headertag.Utils=t}(),function(){"use strict";function e(e){function r(e){for(var t=["floor","inputCentsMultiplier","outputCentsDivisor","outputPrecision","roundingType"],r=0;r<t.length;r++){var n=t[r],i=d[n];"undefined"==typeof e[n]?a[n]=i:a[n]=e[n]}}function n(e){var t=a.floor;a.buckets=[];for(var r=0;r<e.length;r++){var n={};n.max=e[r].max,0!==a.roundingType&&(n.step=e[r].step),t=n.max,a.buckets.push(n)}}function i(e){return a.roundingType===s.FLOOR?Math.floor(e):a.roundingType===s.ROUND?Math.round(e):a.roundingType===s.CEIL?Math.ceil(e):e}function o(e){var r,n,o,d=a.floor,s=e;if(t.isEmpty(a))return e;if(s=Number(e),!t.isNumber(s)||Number.isNaN(s))throw new Error("INVALID_TYPE: `rawBid` must be a number");if(s<0)throw new Error("INVALID_VALUE: `rawBid` must be >= 0");if(s*=a.inputCentsMultiplier,o=a.buckets.length,s<a.floor)s=0;else if(s>=a.buckets[o-1].max)s=a.buckets[o-1].max;else{for(r=0;r<o&&(n=a.buckets[r],!(s<=n.max));r++)d=n.max;0!==a.roundingType&&(s-=d,s/=n.step,s=i(s),s*=n.step,s+=d)}return s/=a.outputCentsDivisor,s=a.outputPrecision<0?s.toString():s.toFixed(a.outputPrecision)}var a={},d={floor:0,inputCentsMultiplier:1,outputCentsDivisor:1,outputPrecision:-1,roundingType:0,buckets:[{max:1/0}]},s={NO_OP:0,FLOOR:1,ROUND:2,CEIL:3};return function(){return"undefined"==typeof e&&(e={}),t.isEmpty(e)?void(a={}):(r(e),void("undefined"==typeof e.roundingType&&"undefined"==typeof e.buckets?(a.roundingType=d.roundingType,a.buckets=d.buckets):n(e.buckets)))}(),{__type__:"BidRoundingTransformer",transformBid:o}}var t=window.headertag.Utilities;window.headertag.BidRoundingTransformer=e}(),function(){"use strict";function e(){function e(){return a}function r(e){var r="";for(var n in e)if(e.hasOwnProperty(n))if(t.isArray(e[n]))for(var i=0;i<e[n].length;i++)r+=n+"[]="+encodeURIComponent(e[n][i])+"&";else r+=n+"="+encodeURIComponent(e[n])+"&";return r.slice(0,-1)}function n(e,t,r){return"/"!==e[e.length-1]&&t&&(e+="/"),t=t||[],r=r?"?"+r:"",e+t.join("/")+r}function i(e){var i=null,o=document.createElement("script");o.type="text/javascript";var a=!0;e.hasOwnProperty("async")&&(a=e.async),o.async=a;var d=e.url;if(e.data){var s;s=t.validateNonEmptyString(e.data)?e.data:r(e.data),d=n(e.url,null,s)}o.src=d;var l,c=!1;if(e.timeout&&(l=setTimeout(function(){try{c=!0,e.onTimeout&&e.onTimeout()}catch(e){}},e.timeout)),e.onSuccess){var p=function(){try{if(c){if(!e.continueAfterTimeout)return}else clearTimeout(l);e.onSuccess(null,t.now(),c),o.parentNode.removeChild(o)}catch(e){}};null===o.onload?o.onload=p:o.onreadystatechange=function(){"loaded"!==o.readyState&&"complete"!==o.readyState||(o.onreadystatechange=null,p())}}var f=document.getElementsByTagName("script")[0];return i=t.now(),f.parentNode.insertBefore(o,f),i}function o(o){if(!e()){if(o.jsonp)return i(o);throw new Error("INTERNAL_ERROR: XHR is not supported in this browser.")}var a=null,d=new XMLHttpRequest,s=o.url,l=null;if(o.data)if("GET"===o.method){var c;c=t.validateNonEmptyString(o.data)?o.data:r(o.data),s=n(o.url,null,c)}else"POST"===o.method&&(l=t.validateNonEmptyString(o.data)?o.data:JSON.stringify(o.data));var p=!0;o.hasOwnProperty("async")&&(p=o.async),d.open(o.method,s,p);var f="application/x-www-form-urlencoded; charset=UTF-8";if("undefined"!=typeof o.contentType&&(f=o.contentType),f&&d.setRequestHeader("Content-Type",f),o.headers){o.headers.hasOwnProperty("X-Request-With")||d.setRequestHeader("X-Request-With","XMLHttpRequest");for(var u in o.headers)o.headers.hasOwnProperty(u)&&d.setRequestHeader(u,o.headers[u])}o.withCredentials&&(d.withCredentials=!0);var g,h=!1;return o.continueAfterTimeout?o.timeout&&(g=setTimeout(function(){try{h=!0,o.onTimeout&&o.onTimeout()}catch(e){}},o.timeout)):(o.timeout&&(d.timeout=o.timeout),o.onTimeout&&(d.ontimeout=function(){try{o.onTimeout()}catch(e){}})),(o.onSuccess||o.onFailure)&&(d.onreadystatechange=function(){if(4===d.readyState)if(h||clearTimeout(g),200===d.status){if(o.onSuccess)try{o.onSuccess(d.responseText,t.now(),h)}catch(e){}}else if(o.onFailure)try{o.onFailure(d.status)}catch(e){}}),a=t.now(),d.send(l),a}var a;return function(){a=window.XMLHttpRequest&&"string"==typeof(new XMLHttpRequest).responseType}(),{__type__:"Network",ajax:o,jsonp:i,buildUrl:n,objToQueryString:r,isXhrSupported:e}}var t=window.headertag.Utilities;window.headertag.Network=e()}(),function(){"use strict";function e(e){function n(e){l[e]=l[e]||{},l[e].startTime=r.now()}function i(e){l.hasOwnProperty(e)&&(l[e].stopTime=r.now())}function o(e,t,n){l[e].partners=l[e].partners||{},l[e].partners[t]=l[e].partners[t]||{},l[e].partners[t].timeout=n,l[e].partners[t].startTime=r.now()}function a(e,t){l.hasOwnProperty(e)&&(l[e].partners[t].stopTime=r.now())}function d(e,t,r,n){l.hasOwnProperty(e)&&(l[e].partners[t].targetingType=r,l[e].partners[t].returnedDemand=n)}function s(n){if(l.hasOwnProperty(n)){var i={};i.s=e,i.u=encodeURIComponent(document.location.href),i.type="RT",i.r=n.replace("_",""),i.t0=l[n].startTime,i.t1=l[n].stopTime||-1;var o=l[n].partners;for(var a in o)if(o.hasOwnProperty(a)){var d=-1,s=1;o[a].startTime&&o[a].stopTime&&(d=o[a].stopTime-o[a].startTime,s=0),i[a+".t"]=d,i[a+".to"]=s,i[a+".ts"]=o[a].timeout||-1;var c=null;if(o[a].hasOwnProperty("returnedDemand"))if("page"===o[a].targetingType)for(c in o[a].returnedDemand.page.demand)o[a].returnedDemand.page.demand.hasOwnProperty(c)&&(i[a+".p.pl."+c]=o[a].returnedDemand.page.demand[c].toString()||"");else for(var p in o[a].returnedDemand.slot)if(o[a].returnedDemand.slot.hasOwnProperty(p))for(c in o[a].returnedDemand.slot[p].demand)o[a].returnedDemand.slot[p].demand.hasOwnProperty(c)&&(i[a+".p."+p+"."+c]=o[a].returnedDemand.slot[p].demand[c].toString()||"")}t.ajax({async:!0,data:i,jsonp:!0,method:"GET",url:r.getProtocol("http://as","https://as-sec")+".casalemedia.com/headerstats"}),delete l[n]}}var l={};this.startSessionTimer=n,this.stopSessionTimer=i,this.startPartnerTimer=o,this.stopPartnerTimer=a,this.recordReturnedDemand=d,this.sendReport=s}var t=window.headertag.Network,r=window.headertag.Utilities;window.headertag.HeaderStats=e}(),function(){"use strict";function e(e,t){function r(e,t){return Number(e)-Number(t)}function n(){return u}function i(){return g}function o(e,t){var n,i,o,a,d=[];n=Object.keys(y).sort(r);for(var s=n.length-1;s>=0;s--)if(o=n[s],!(Number(o)>e)){i=Object.keys(y[o]).sort(r);for(var l=i.length-1;l>=0;l--)if(a=i[l],!(Number(a)>t)){d=y[o][a];break}if(d.length>0)break}return d}function a(){return v}function d(){return S}function s(){return b}function l(){return w}function c(){return h}function p(){return m}function f(e){T=e}var u,g,h,m,y,v,S,b,w,T;return function(){u=e,t.hasOwnProperty("divId")&&(g=t.divId);var r,n,i,o=/^(\d+)x(\d+)$/;y={};for(var a in t.sizeMapping)t.sizeMapping.hasOwnProperty(a)&&(r=o.exec(a),n=r[1],i=r[2],y.hasOwnProperty(n)||(y[n]={}),y[n][i]=t.sizeMapping[a]);t.hasOwnProperty("targeting")&&(v=t.targeting),t.hasOwnProperty("deviceType")&&(S=t.deviceType),t.hasOwnProperty("adUnitPath")&&(b=t.adUnitPath),t.hasOwnProperty("adUnitPathRegEx")&&(w=new RegExp(t.adUnitPathRegEx)),t.hasOwnProperty("divIdRegEx")&&(h=new RegExp(t.divIdRegEx)),t.hasOwnProperty("divIdRegExBySize")&&(m=new RegExp(t.divIdRegExBySize))}(),{getId:n,getSlotElementId:n,getDivId:i,getSizes:o,getTargeting:a,getDeviceType:d,getAdUnitPath:s,getDivIdRegEx:c,getDivIdRegExBySize:p,getAdUnitPathRegEx:l,setGSlotRef:f}}var t=window.headertag.Utilities;e.__isObjectSubset=function(e,r){for(var n in e)if(e.hasOwnProperty(n)){if("!"===n[0]){var i=n.substring(1);if(r.hasOwnProperty(i)){if(1===e[n].length&&"*"===e[n][0])return!1;for(var o=0;o<e[n].length;o++){var a=[e[n][o]];if(t.isArraySubset(a,r[i]))return!1}continue}}if(!r.hasOwnProperty(n))return!1;if((1!==e[n].length||"*"!==e[n][0])&&!t.isArraySubset(e[n],r[n]))return!1}return!0},e.__matcher=function(e,t){return e[0]===t[0]&&e[1]===t[1]},e.__getGSlotSizes=function(e,t,r){var n=[],i=e.getSizes(t,r);if(!i)return[];for(var o=0;o<i.length;o++)"fluid"!==i[o]&&n.push([i[o].getWidth(),i[o].getHeight()]);return n},e.__getGSlotTargeting=function(e){for(var t={},r=e.getTargetingKeys(),n=0;n<r.length;n++)t[r[n]]=e.getTargeting(r[n]);return t},e.selectByStaticDivId=function(e,t){for(var r={selectedHtSlots:[],htSlotToGSlotMap:{}},n=t.length-1;n>=0;n--)for(var i=t[n],o=e.length-1;o>=0;o--){var a=e[o];if(a.getDivId()&&a.getDivId()===i.getSlotElementId()){t.splice(n,1),e.splice(o,1),r.selectedHtSlots.push(a),r.htSlotToGSlotMap[a.getSlotElementId()]=i.getSlotElementId();break}}return r},e.selectByDivIdRegExBySize=function(r,n){for(var i={selectedHtSlots:[],htSlotToGSlotMap:{}},o=t.getViewportWidth(),a=t.getViewportHeight(),d=n.length-1;d>=0;d--){for(var s=n[d],l={selectedHtSlot:null,selectedHtSlotIndex:0,sizeMatchScore:0},c=r.length-1;c>=0;c--){var p=r[c];if(p.getDivIdRegExBySize()&&p.getDivIdRegExBySize().test(s.getSlotElementId())){var f=p.getSizes(o,a);if(f){var u=e.__getGSlotSizes(s,o,a);if(t.isArraySubset(f,u,e.__matcher)){var g=f.length/u.length;g>=l.sizeMatchScore&&(l.sizeMatchScore=g,l.selectedHtSlot=p,l.selectedHtSlotIndex=c)}}}}l.selectedHtSlot&&(n.splice(d,1),r.splice(l.selectedHtSlotIndex,1),i.selectedHtSlots.push(l.selectedHtSlot),i.htSlotToGSlotMap[l.selectedHtSlot.getSlotElementId()]=s.getSlotElementId())}return i},e.selectByDivIdRegEx=function(e,t){for(var r={selectedHtSlots:[],htSlotToGSlotMap:{}},n=t.length-1;n>=0;n--)for(var i=t[n],o=e.length-1;o>=0;o--){var a=e[o];if(a.getDivIdRegEx()&&a.getDivIdRegEx().test(i.getSlotElementId())){t.splice(n,1),e.splice(o,1),r.selectedHtSlots.push(a),r.htSlotToGSlotMap[a.getSlotElementId()]=i.getSlotElementId();break}}return r},e.selectByCustomKeyValue=function(r,n){for(var i={selectedHtSlots:[],htSlotToGSlotMap:{}},o=t.getViewportWidth(),a=t.getViewportHeight(),d=n.length-1;d>=0;d--){for(var s=n[d],l={selectedHtSlot:null,selectedHtSlotIndex:0,sizeMatchScore:0,targetingMatchScore:0},c=0;c<r.length;c++){var p=r[c],f=p.getSizes(o,a);if(f){var u=e.__getGSlotSizes(s,o,a);if(t.isArraySubset(f,u,e.__matcher)){var g=f.length/u.length;if(!(g<l.sizeMatchScore)){var h=p.getTargeting();if(h){for(var m=e.__getGSlotTargeting(s),y=!1,v=0,S=0;S<h.length;S++)if(h[S])if(t.validateNonEmptyObject(h[S])){if(e.__isObjectSubset(h[S],m)){var b=0;for(var w in h[S])h[S].hasOwnProperty(w)&&(b+=h[S][w].length);v=Math.max(v,b)}}else y=!0;if(y||0!==v)if(g>l.sizeMatchScore)l.sizeMatchScore=g,l.targetingMatchScore=v,l.selectedHtSlot=p,l.selectedHtSlotIndex=c;else if(g===l.sizeMatchScore){if(v<=l.targetingMatchScore)continue;l.sizeMatchScore=g,l.targetingMatchScore=v,l.selectedHtSlot=p,l.selectedHtSlotIndex=c}}}}}}l.selectedHtSlot&&(n.splice(d,1),r.splice(l.selectedHtSlotIndex,1),i.selectedHtSlots.push(l.selectedHtSlot),i.htSlotToGSlotMap[l.selectedHtSlot.getSlotElementId()]=s.getSlotElementId())}return i},e.selectByAdUnitPath=function(r,n){for(var i={selectedHtSlots:[],htSlotToGSlotMap:{}},o=t.getViewportWidth(),a=t.getViewportHeight(),d=n.length-1;d>=0;d--)for(var s=n[d],l=r.length-1;l>=0;l--){var c=r[l],p=c.getAdUnitPath();if(p&&s.getAdUnitPath()===p){var f=c.getSizes(o,a);if(f){var u=e.__getGSlotSizes(s,o,a);if(t.isArraySubset(f,u,e.__matcher)){n.splice(d,1),r.splice(l,1),i.selectedHtSlots.push(c),i.htSlotToGSlotMap[c.getSlotElementId()]=s.getSlotElementId();break}}}}return i},e.selectByAdUnitPathRegEx=function(r,n){for(var i={selectedHtSlots:[],htSlotToGSlotMap:{}},o=t.getViewportWidth(),a=t.getViewportHeight(),d=n.length-1;d>=0;d--)for(var s=n[d],l=r.length-1;l>=0;l--){var c=r[l],p=c.getAdUnitPathRegEx();if(p&&p.test(s.getAdUnitPath())){var f=c.getSizes(o,a);if(f){var u=e.__getGSlotSizes(s,o,a);if(t.isArraySubset(f,u,e.__matcher)){n.splice(d,1),r.splice(l,1),i.selectedHtSlots.push(c),i.htSlotToGSlotMap[c.getSlotElementId()]=s.getSlotElementId();break}}}}return i},window.headertag.HeaderTagSlot=e}(),window.headertag.partnerScopes.push(function(){"use strict";function validateTargetingType(e){return"string"==typeof e&&SUPPORTED_TARGETING_TYPES[e]}function getKeys(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t}function arrayCompare(e,t){var r,n,i={matched:0,success:!1};if(!e||!t)return i;for(r=e.length,n=0;n<r;n++){if(t.indexOf(e[n])===-1)return i;i.matched++}return i.success=!0,i}function retrieveIndexSlot(e,t,r){var n,i,o,a,d,s,l,c={};for(d in t)if(!r[d]){a=t[d],n=0,o=0,i=0;for(s in a)n++,l=arrayCompare(a[s],e[s]),l.success&&(i++,o+=l.matched);n===i&&(c.indexId||(c={matched:o,indexId:d}),o>c.matched&&(c.matched=o,c.indexId=d))}return c.indexId}function mapSlots(e){var t,r,n,i=headerTagArgs.gptDivs,o=e.length,a={};if(i)for(n=0;n<o;n++){r=e[n].getSlotElementId();for(t in i)i[t].indexOf(r)!==-1&&(a[t]||(a[t]=[]),a[t].push(r))}return a}function convertSlotDemandObject(e,t){if("slot"===targetingType)return e;var r,n,i={page:{slotIds:[],gCorrelator:t,demand:{}}};for(r in e.slot){i.page.slotIds.push(r),i.page.timestamp?i.page.timestamp=Math.min(i.page.timestamp,e.slot[r].timestamp):i.page.timestamp=e.slot[r].timestamp;for(n in e.slot[r].demand)i.page.demand[n]=i.page.demand[n]||[],i.page.demand[n]=i.page.demand[n].concat(e.slot[r].demand[n])}return i}function getAdSize(e){if(headerTagArgs&&headerTagArgs.slots)for(var t=0;t<headerTagArgs.slots.length;t++){var r=headerTagArgs.slots[t];if(r.id&&r.id===e&&r.width&&r.height)return r.width+"x"+r.height}return""}function parseResults(e,t,r){var n,i,o,a,d,s,l=[],c={slot:{}};if(t){prefetch.demand=JSON.parse(JSON.stringify(indexDemandList)),prefetch.state=prefetchState.READY,prefetch.analyticsCallback(prefetch.correlator);for(var p=0,f=prefetch.callbacks.length;p<f;p++)setTimeout(prefetch.callbacks[p],0);return void(prefetch.timestamp=Utils.now())}if(r?(n=prefetch.correlator,a=prefetch.demand,s=mapSlots(r)):(n=correlatorTracker[e],a=indexDemandList,s=ixSlots[n]),(r||dSlots[n]).map(function(e){for(o=e.getSlotElementId(),adId++,i=0;i<a.length;i++)if(d=a[i].split("_"),"undefined"!=typeof s[d[1]]&&s[d[1]].indexOf(o)!==-1)if(r&&l.push(prefetch.demand[i]),c.slot[o]||(c.slot[o]={timestamp:prefetch.timestamp||Utils.now(),demand:{}}),c.slot[o].demand[d[0]]||(c.slot[o].demand[d[0]]=[]),targetingMode===TARGETING_MODE.STANDARD||targetingMode===TARGETING_MODE.ADVANCED){var t=d[0],n=d[1],p=d[2],f="",u=o+"_"+adId,g=getAdSize(n),h=d.slice(1).join("_");c.slot[o].demand[t].push(g+"_"+p),t===headerTagPrivateKey&&(f=d.slice(3).join("_"),c.slot[o].demand[headerTagPrivateIdKey]||(c.slot[o].demand[headerTagPrivateIdKey]=[]),c.slot[o].demand[headerTagPrivateIdKey].push(g+"_"+f)),c.slot[o].demand[headerTagIdKey]||(c.slot[o].demand[headerTagIdKey]=[u]),targetIDMap[u]||(targetIDMap[u]={}),targetIDMap[u][g]=h}else c.slot[o].demand[d[0]].push(d[1]+"_"+d[2])}),r){var u;for(var g in s)if(s.hasOwnProperty(g)&&prefetch.slotIds.indexOf(g)!==-1){for(i=0;i<s[g].length;i++)c.slot[s[g][i]]||(c.slot[s[g][i]]={timestamp:prefetch.timestamp,demand:{}});u=prefetch.slotIds.indexOf(g),u!==-1&&prefetch.slotIds.splice(u,1)}for(demandStore=c,i=prefetch.demand.length-1;i>=0;i--)l.indexOf(prefetch.demand[i])!==-1&&prefetch.demand.splice(i,1)}else"function"==typeof cb[n]&&(cb[n](null,c),delete cb[n]),delete correlatorTracker[e],delete ixSlots[n],delete dSlots[n]}function escapeCharacter(e){var t=META[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}function quote(e){return ESCAPABLE.lastIndex=0,ESCAPABLE.test(e)?e.replace(ESCAPABLE,escapeCharacter):e}function OpenRTBRequest(e,t){if("number"!=typeof e||e%1!==0||e<0)throw"Invalid Site ID";this.siteID=e,this.impressions=[],top===self?(this.sitePage=location.href,this.topframe=1):(this.sitePage=document.referrer,this.topframe=0),"undefined"==typeof indexRequestData.requestCounter?indexRequestData.requestCounter=Math.floor(256*Math.random()):indexRequestData.requestCounter=(indexRequestData.requestCounter+1)%256,this.requestID=String((new Date).getTime()%2592e3*256+indexRequestData.requestCounter+256),correlatorTracker[this.requestID]=t}function cygnus_index_judge(e){indexDemandList=[];var t,r={},n="^(?:"+headerTagPublicKey+"|"+headerTagPrivateKey+")_(?:T([0-9])_)?(.*)_.*$",i=new RegExp(n),o=[];for(t=0;t<e.length;t++)if(e[t].split("_")[0]!==headerTagPrivateKey){var a=i.exec(e[t]);if("undefined"!=typeof a&&null!==a){var d,s;if(d=a[1],s=a[2],"undefined"!=typeof d&&null!==d||(d=0),r[s]=r[s]||{},"undefined"==typeof r[s].tier||r[s].tier<d){r[s].tier=d;var l=e[t];if(d>0){var c=e[t].split("_"),p=c.shift(),f=c.join("_");c.shift();var u=c.join("_");l=p+"_"+u,indexRequestData.targetIDToBid[u]=indexRequestData.targetIDToBid[f]}r[s].target=l}}}else o.push(e[t]);var g,h=[];for(g in r)r.hasOwnProperty(g)&&h.push(r[g].target);return h.concat(o)}function Partner(e){function t(e,t){if(Utils.isEmpty(e))return t;if(Utils.isEmpty(t))return e;var r,n;for(r in t.slot)if("undefined"==typeof e.slot[r])e.slot[r]=t.slot[r];else{e.slot[r].timestamp=Math.min(e.slot[r].timestamp,t.slot[r].timestamp);for(n in t.slot[r].demand){switch(typeof e.slot[r].demand[n]){case"undefined":e.slot[r].demand[n]=[];break;case"string":e.slot[r].demand[n]=[e.slot[r].demand[n]]}e.slot[r].demand[n]=e.slot[r].demand[n].concat(t.slot[r].demand[n])}}return e}function r(e,t){var r,n,i,o;try{if("undefined"==typeof headerTagArgs||"undefined"==typeof headerTagArgs.siteID||"undefined"==typeof headerTagArgs.slots)return;for("undefined"==typeof indexRequestData&&(indexRequestData={},indexRequestData.impIDToSlotID={},indexRequestData.reqOptions={}),i=new OpenRTBRequest(headerTagArgs.siteID,e),headerTagArgs.url&&"string"==typeof headerTagArgs.url&&i.setPageOverride(headerTagArgs.url),indexRequestData.impIDToSlotID[i.requestID]={},indexRequestData.reqOptions[i.requestID]={},r=0;r<headerTagArgs.slots.length;r++)o=headerTagArgs.slots[r],t.indexOf(o.id.toString())!==-1&&(n=i.addImpression(o.width,o.height,o.bidfloor,o.bidfloorcur,o.id,o.siteID),n&&(indexRequestData.impIDToSlotID[i.requestID][n]=String(o.id)));return"number"==typeof headerTagArgs.targetMode&&(indexRequestData.reqOptions[i.requestID].targetMode=headerTagArgs.targetMode),"function"==typeof headerTagArgs.callback&&(indexRequestData.reqOptions[i.requestID].callback=headerTagArgs.callback),i.sendRequestAsync(e,e===prefetch.correlator)}catch(e){}}function n(e){var t=[],r=e.divIds;for(var n in headerTagArgs.gptDivs)headerTagArgs.gptDivs.hasOwnProperty(n)&&(1!==headerTagArgs.gptDivs[n].length,r.indexOf(headerTagArgs.gptDivs[n][0])!==-1&&t.push(n));return t}var i=this;targetingType=e.targetingType||"slot",targetingMode=e.targetingMode||TARGETING_MODE.LEGACY,headerTagArgs={gptDivs:cygnus_index_args.gpt_divs,siteID:cygnus_index_args.siteID,slots:cygnus_index_args.slots,url:cygnus_index_args.url,targetMode:cygnus_index_args.targetMode,callback:cygnus_index_args.callback},targetIDMap={},adId=0,cygnus_index_args=void 0;var o=e.targetingType,a=SUPPORTED_ANALYTICS,d=SUPPORTED_OPTIONS,s=SUPPORTED_OPTIONS.demandExpiry?SUPPORTED_OPTIONS.demandExpiry:-1;this.publicKey=e.publicKey||"IOM",this.privateKey=e.privateKey||"IPM",this.privateIdKey=e.privateIdKey||"IPMID",this.idKey=e.idKey||"ix_id",headerTagPrivateKey=this.privateKey,headerTagPublicKey=this.publicKey,headerTagPrivateIdKey=this.privateIdKey,headerTagIdKey=this.idKey,this.getPartnerTargetingType=function(){return o},this.getSupportedAnalytics=function(){return a},this.getSupportedOptions=function(){return d},this.getPartnerDemandExpiry=function(){return s},this.setPartnerTargetingType=function(e){return!!validateTargetingType(e)&&(o=e,targetingType=o,!0)},this.prefetchDemand=function(t,i,o){prefetch.state=prefetchState.IN_PROGRESS,prefetch.correlator=t,e.prefetch?("page"===targetingType&&(prefetch.gCorrelator=i),this.prefetchIndexSlotIds=e.prefetch.info[window.headertag.pagetype].requiredIndexSlots):"page"===targetingType?(prefetch.gCorrelator=i.gCorrelator,this.prefetchIndexSlotIds=n(i.htSlots)):this.prefetchIndexSlotIds=n(i),prefetch.slotIds=this.prefetchIndexSlotIds.slice(),prefetch.slotIdsInPrefetch=this.prefetchIndexSlotIds.slice(),prefetch.analyticsCallback=o,r(t,this.prefetchIndexSlotIds)},this.getDemand=function e(n,o,a){var s;if("page"===targetingType&&(o.htSlots?(s=o.gCorrelator,o=o.htSlots):(s=o,o=Utils.getSlots())),prefetch.state===prefetchState.IN_PROGRESS){for(var l=getKeys(mapSlots(o)),c=!1,p=0,f=l.length;p<f;p++){
var u=prefetch.slotIdsInPrefetch.indexOf(l[p]);u!==-1&&(prefetch.slotIdsInPrefetch.splice(u,1),c=!0)}if(c)return void prefetch.callbacks.push(e.bind(i,n,o,a))}var g={};if(prefetch.state===prefetchState.READY&&(prefetch.demand&&prefetch.demand.length>0&&prefetch.slotIds.length&&parseResults(null,!1,o),demandStore.slot)){g.slot=g.slot||{};for(var h=o.length-1;h>=0;h--){var m=o[h].getSlotElementId();if(demandStore.slot.hasOwnProperty(m)){if((d.demandExpiry<0||Utils.now()-demandStore.slot[m].timestamp<=d.demandExpiry)&&(g.slot[m]=demandStore.slot[m],o.splice(h,1)),"page"===targetingType&&s===prefetch.gCorrelator)continue;delete demandStore.slot[m]}}if(prefetch.timestamp&&Utils.now()-prefetch.timestamp>d.demandExpiry&&(prefetch.slotIds=[],prefetch.demand=[],delete prefetch.timestamp),Utils.validateNonEmptyObject(demandStore.slot)||prefetch.slotIds.length||(prefetch.state=prefetchState.USED,delete prefetch.timestamp),!o.length)return void a(null,convertSlotDemandObject(g,s))}cb[n]=function(e,r){return e?void a(e):void a(null,convertSlotDemandObject(t(g,r),s))},dSlots[n]=o,ixSlots[n]=mapSlots(o);var y=getKeys(ixSlots[n]);return y.length?void r(n,y):a(null,convertSlotDemandObject(g))}}function init(e,t){var r=[];return Utils=window.headertag.Utils,e.hasOwnProperty("targetingType")&&!validateTargetingType(e.targetingType)&&(r.push("targetingType either not set or invalid. Defaulting to using slot level targeting."),e.targetingType="slot"),e.hasOwnProperty("publicKey")&&!Utils.validateNonEmptyString(e.publicKey)&&(r.push("Private key is not a string. Defaulting value to IOM"),e.publicKey="IOM"),e.hasOwnProperty("privateKey")&&!Utils.validateNonEmptyString(e.privateKey)&&(r.push("Private key is not a string. Defaulting value to IPM"),e.privateKey="IPM"),e.hasOwnProperty("privateIdKey")&&!Utils.validateNonEmptyString(e.privateIdKey)&&r.push("Private ID key is not a string"),e.hasOwnProperty("idKey")&&!Utils.validateNonEmptyString(e.idKey)&&r.push("ID key is not a string"),e.hasOwnProperty("targetingMode")&&(Utils.validateNonEmptyString(e.targetingMode)?e.targetingMode!==TARGETING_MODE.LEGACY&&e.targetingMode!==TARGETING_MODE.STANDARD&&e.targetingMode!==TARGETING_MODE.ADVANCED&&r.push("Targeting Mode is not a supported value"):r.push("Targeting Mode is not a string")),r.length?t(r,new Partner(e)):void t(null,new Partner(e))}var PARTNER_ID="INDX",SUPPORTED_TARGETING_TYPES={page:!0,slot:!0},SUPPORTED_ANALYTICS={time:!0,demand:!0},SUPPORTED_OPTIONS={prefetch:!0,demandExpiry:5e4},prefetchState={NEW:1,IN_PROGRESS:2,READY:3,USED:4},TARGETING_MODE={LEGACY:"legacy",STANDARD:"standard",ADVANCED:"advanced"},prefetch={state:prefetchState.NEW,demand:null,correlator:null,slotIds:[],callbacks:[]},Network=window.headertag.Network,demandStore={},headerTagArgs,indexDemandList,headerTagPublicKey,headerTagPrivateKey,headerTagPrivateIdKey,headerTagIdKey,targetingMode,targetIDMap,adId,cb={},correlatorTracker={},ESCAPABLE=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,META={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},indexRequestData,dSlots={},ixSlots={},targetingType,Utils,demandExpiry=15e3;OpenRTBRequest.prototype.serialize=function(){var e,t,r,n='{"id":'+this.requestID+',"site":{"page":"'+quote(this.sitePage)+'"';for("string"==typeof document.referrer&&(n+=',"ref":"'+quote(document.referrer)+'"'),n+='},"imp":[',r=0;r<this.impressions.length;r++)e=this.impressions[r],t=[],n+='{"id":"'+e.id+'", "banner":{"w":'+e.w+',"h":'+e.h+',"topframe":'+String(this.topframe)+"}","number"==typeof e.bidfloor&&(n+=',"bidfloor":'+e.bidfloor,"string"==typeof e.bidfloorcur&&(n+=',"bidfloorcur":"'+quote(e.bidfloorcur)+'"')),"string"!=typeof e.slotID||e.slotID.match(/^\s*$/)||t.push('"sid":"'+quote(e.slotID)+'"'),"number"==typeof e.siteID&&t.push('"siteID":'+e.siteID),t.length>0&&(n+=',"ext": {'+t.join()+"}"),n+=r+1==this.impressions.length?"}":"},";return n+="]}"},OpenRTBRequest.prototype.addImpression=function(e,t,r,n,i,o){var a={id:String(this.impressions.length+1)};if("number"!=typeof e||e<=1)return null;if("number"!=typeof t||t<=1)return null;if(("string"==typeof i||"number"==typeof i)&&String(i).length<=50&&(a.slotID=String(i)),a.w=e,a.h=t,void 0!==r&&"number"!=typeof r)return null;if("number"==typeof r){if(r<0)return null;if(a.bidfloor=r,void 0!==n&&"string"!=typeof n)return null;a.bidfloorcur=n}if("undefined"!=typeof o){if(!("number"==typeof o&&o%1===0&&o>=0))return null;a.siteID=o}return this.impressions.push(a),a.id},OpenRTBRequest.prototype.sendRequestAsync=function(correlator,isPrefetch){if(0===this.impressions.length)return void(cb.hasOwnProperty(correlator)&&(cb[correlator](null,{}),delete cb[correlator]));var jsonURI=encodeURIComponent(this.serialize()),scriptSrc="https:"===window.location.protocol?"https://as-sec.casalemedia.com":"http://as.casalemedia.com";scriptSrc+="/cygnus?v=7&fn=headertag_parse&s="+this.siteID+"&r="+jsonURI,Network.ajax({url:scriptSrc,method:"GET",partnerId:"INDX",jsonp:!0,withCredentials:!0,onSuccess:function(responseText){responseText&&eval(responseText)},onFailure:function(){cb.hasOwnProperty(correlator)&&(cb[correlator](["Unable to get demand from cygnus"]),delete cb[correlator])}})},window.headertag_parse=function(e){function t(e,t){indexDemandList.push(e+t),void 0===indexRequestData.targetIDToBid[t]?(indexRequestData.targetIDToBid[t]=[o.adm],indexRequestData.correlator[t]=[r]):(indexRequestData.targetIDToBid[t].push(o.adm),indexRequestData.correlator[t].push(r)),l={},l.impressionID=o.impid,"undefined"!=typeof o.ext.dealid&&(l.dealID=o.ext.dealid),l.bid=o.price,l.slotID=a,l.priceLevel=o.ext.pricelevel,l.target=e+t,f.push(l)}var r;try{if(indexDemandList=[],e){if("object"!=typeof indexRequestData||"object"!=typeof indexRequestData.impIDToSlotID||"undefined"==typeof indexRequestData.impIDToSlotID[e.id])return;var n,i=0;"object"==typeof indexRequestData.reqOptions&&"object"==typeof indexRequestData.reqOptions[e.id]&&("function"==typeof indexRequestData.reqOptions[e.id].callback&&(n=indexRequestData.reqOptions[e.id].callback),"number"==typeof indexRequestData.reqOptions[e.id].targetMode&&(i=indexRequestData.reqOptions[e.id].targetMode)),indexRequestData.lastRequestID=e.id,r=correlatorTracker[e.id];var o,a,d,s,l,c,p,f=[],u="undefined"==typeof e.seatbid?0:e.seatbid.length;for(c=0;c<u;c++)for(p=0;p<e.seatbid[c].bid.length;p++)o=e.seatbid[c].bid[p],"object"==typeof o.ext&&"string"==typeof o.ext.pricelevel&&"undefined"!=typeof indexRequestData.impIDToSlotID[e.id][o.impid]&&(a=indexRequestData.impIDToSlotID[e.id][o.impid],"undefined"==typeof indexDemandList&&(indexDemandList=[]),"undefined"==typeof indexRequestData.targetIDToBid&&(indexRequestData.targetIDToBid={}),"undefined"==typeof indexRequestData.correlator&&(indexRequestData.correlator={}),"string"==typeof o.ext.dealid?(s=headerTagPrivateKey+"_",targetingMode===TARGETING_MODE.STANDARD||targetingMode===TARGETING_MODE.ADVANCED?(d=a+o.ext.pricelevel+"_"+o.ext.dealid,t(s,d)):1===i?(d=a+o.ext.pricelevel,t(s,d)):2===i?(d=a+o.ext.pricelevel,t(s,d),d=a+"_"+o.ext.dealid,t(s,d)):(d=a+"_"+o.ext.dealid,t(s,d))):(s=headerTagPublicKey+"_",d=a+o.ext.pricelevel,t(s,d)));"function"==typeof n&&(0===f.length?n(e.id):n(e.id,f)),indexDemandList=cygnus_index_judge(indexDemandList.slice(0))}}catch(e){}"undefined"==typeof indexDemandList&&(indexDemandList=[]),parseResults(e.id,correlatorTracker[e.id]===prefetch.correlator)},window.index_render=function(e,t){var r,n,i,o,a,d,s;"undefined"==typeof index_demand&&(window.index_demand={}),s=t.split("_"),r=s[0];try{if(n=indexRequestData.targetIDToBid[t].shift(),null!==n)e.write(n),index_demand[r]=1,delete index_no_demand[r];else{for(i={},j=0;j<headerTagArgs.slots.length;j++)if(headerTagArgs.slot[j].id===r){i.s=headerTagArgs.slot[j].siteID;break}i.hasOwnProperty("s")||(i.s=0),i.u=encodeURIComponent(location.href),i.type="RT",i.r=correlator,i.blank="["+t+"]",o=Utils.objToQueryString(i),a=("https:"===location.protocol?"https://as-sec.":"http://as.")+"casalemedia.com/headerstats"+o,d=new XMLHttpRequest,d.open("GET",a,!0),d.send()}}catch(e){}},window.headertag_render=function(e,t,r){var n,i,o=r,a=t.split(",");for(n=0;n<a.length;n++)if(i=a[n].split("_"),i[0]==o)return void window.index_render(e,a[n])},window.headertag.IxModule=window.headertag.IxModule||{},window.headertag.IxModule.render=function(e,t,r,n){if(e&&t&&r&&n)try{var i=t[headerTagIdKey],o=targetIDMap[i][r+"x"+n];window.index_render(e,o),e.close(),targetingMode===TARGETING_MODE.ADVANCED&&e.defaultView&&e.defaultView.frameElement&&(e.defaultView.frameElement.width=r,e.defaultView.frameElement.height=n)}catch(e){}},window.headertag.registerPartner(PARTNER_ID,init)}),window.headertag.partnerScopes.push(function(){"use strict";function validateTargetingType(e){return"string"==typeof e&&SUPPORTED_TARGETING_TYPES[e]}function Partner(config){function parseSlotMappings(e,t){var r={};for(var n in t)if(t.hasOwnProperty(n)){r[n]={},r[n].xSlots=[];for(var i=0;i<t[n].length;i++){var o={},a=t[n][i];o.placementId=e[a].placementId,o.htSlot=n,o.width=e[a].sizes[0][0],o.height=e[a].sizes[0][1],r[n].xSlots.push(o)}}return r}function generateBidMap(e){var t={};for(var r in e)if(e.hasOwnProperty(r))for(var n=0;n<e[r].xSlots.length;n++){var i=e[r].xSlots[n],o=r+"-"+i.placementId;t[o]=i}return t}function loadSovrnBid(e){var t,r={},n=[],i=responseStore[e];delete responseStore[e],i&&i.id&&i.seatbid&&0!==i.seatbid.length&&i.seatbid[0].bid&&0!==i.seatbid[0].bid.length&&i.seatbid[0].bid.forEach(function(r){var i,o=bidMap[r.impid];if(o&&(i=parseFloat(r.price),0!==i)){var a=r.adm,d='<img src="'+r.nurl+'">';t={},t.cpm=i,t.ad=decodeURIComponent(a+d),t.width=o.width,t.height=o.height,t.htSlot=o.htSlot,t.reqId=o.htSlot+e,n.push(t)}});for(var o=0;o<n.length;o++){t=n[o];var a=bidTransformer.transformBid(t.cpm);r[t.htSlot]=r[t.htSlot]||{},r[t.htSlot].timestamp=Utils.now(),r[t.htSlot].demand=r[t.htSlot].demand||{},r[t.htSlot].demand[omKey]=r[t.htSlot].demand[omKey]||[],r[t.htSlot].demand[omKey].push(t.width+"x"+t.height+"_"+a),r[t.htSlot].demand[idKey]=t.reqId,creativeStore[t.reqId]=creativeStore[t.reqId]||{},creativeStore[t.reqId][t.width+"x"+t.height]=t}return r}function getRequestUrl(e,t){for(var r=Utils.getProtocol(),n=r+"//ap.lijit.com/rtb/bid?callback=sovrn_load_cb&br=",i={id:t,site:{domain:__pubdomain,page:document.location.pathname},imp:[]},o=0;o<e.length;o++)if(xSlotsStore.hasOwnProperty(e[o]))for(var a=0;a<xSlotsStore[e[o]].xSlots.length;a++){var d=xSlotsStore[e[o]].xSlots[a];i.imp.push({id:e[o]+"-"+d.placementId,banner:{w:d.width,h:d.height},tagid:d.placementId})}return!!i.imp.length&&(n+=encodeURIComponent(JSON.stringify(i)))}function sendDemandRequest(htSlotNames,callback){window.sovrn_count=window.sovrn_count||0;var sovReqId="lv"+window.sovrn_count++,reqUrl=getRequestUrl(htSlotNames,sovReqId);return reqUrl?void Network.ajax({url:reqUrl,method:"GET",partnerId:"SOVRN",jsonp:!0,contentType:!1,withCredentials:!0,onSuccess:function(responseText){responseText&&eval(responseText),callback(null,loadSovrnBid(sovReqId))},onFailure:function(){callback("No demand response.")}}):void callback(null,{})}var _this=this,targetingType=config.targetingType,supportedAnalytics=SUPPORTED_ANALYTICS,supportedOptions=SUPPORTED_OPTIONS,prefetch={state:prefetchState.NEW,correlator:null,slotIds:[],callbacks:[]},demandStore={},xSlotsStore=parseSlotMappings(config.xSlots,config.mapping),bidMap=generateBidMap(xSlotsStore),responseStore={},creativeStore={},omKey="ix_sovrn_om",idKey="ix_sovrn_id",bidTransformer,bidTransformConfig={floor:0,inputCentsMultiplier:100,outputCentsDivisor:100,outputPrecision:2,roundingType:1,buckets:[{max:2e3,step:5},{max:5e3,step:100}]};config.targetKeyOverride&&(config.targetKeyOverride.omKey&&(omKey=config.targetKeyOverride.omKey),config.targetKeyOverride.idKey&&(idKey=config.targetKeyOverride.idKey)),config.roundingBuckets&&(bidTransformConfig=config.roundingBuckets),bidTransformer=BidRoundingTransformer(bidTransformConfig),this.getPartnerTargetingType=function(){return targetingType},this.getSupportedAnalytics=function(){return supportedAnalytics},this.getSupportedOptions=function(){return supportedOptions},this.getPartnerDemandExpiry=function(){return supportedOptions.demandExpiry},this.setPartnerTargetingType=function(e){return!!validateTargetingType(e)&&(targetingType=e,!0)},this.recordSovrnResponse=function(e){var t=e.id;responseStore[t]=e},this.prefetchDemand=function(e,t,r){prefetch.state=prefetchState.IN_PROGRESS,prefetch.correlator=e,prefetch.slotIds=t.divIds.slice(),demandStore[e]={slot:{}};for(var n=0;n<t.divIds.length;n++)demandStore[e].slot[t.divIds[n]]={};sendDemandRequest(t.divIds,function(n,i){if(i){demandStore[e].slot=i;for(var o=0;o<t.divIds.length;o++)demandStore[e].slot.hasOwnProperty(t.divIds[o])||(demandStore[e].slot[t.divIds[o]]={},demandStore[e].slot[t.divIds[o]].timestamp=Utils.now(),demandStore[e].slot[t.divIds[o]].demand={})}prefetch.state=prefetchState.READY,r(e);for(var a=0,d=prefetch.callbacks.length;a<d;a++)setTimeout(prefetch.callbacks[a],0)})},this.getDemand=function e(t,r,n){if(prefetch.state===prefetchState.IN_PROGRESS){for(var i=Utils.getDivIds(r),o=!1,a=0,d=i.length;a<d;a++){var s=prefetch.slotIds.indexOf(i[a]);s!==-1&&(prefetch.slotIds.splice(s,1),o=!0)}if(o)return void prefetch.callbacks.push(e.bind(_this,t,r,n))}var l={slot:{}};if(prefetch.state===prefetchState.READY){for(var c=r.length-1;c>=0;c--){var p=r[c].getSlotElementId();demandStore[prefetch.correlator].slot.hasOwnProperty(p)&&((supportedOptions.demandExpiry<0||Utils.now()-demandStore[prefetch.correlator].slot[p].timestamp<=supportedOptions.demandExpiry)&&(l.slot[p]=demandStore[prefetch.correlator].slot[p],r.splice(c,1)),delete demandStore[prefetch.correlator].slot[p])}if(Utils.validateNonEmptyObject(demandStore[prefetch.correlator].slot)||(prefetch.state=prefetchState.USED),!r.length)return void n(null,l)}sendDemandRequest(Utils.getDivIds(r),function(e,t){if(e)return void n(e);for(var r in t)t.hasOwnProperty(r)&&(l.slot[r]=t[r]);n(null,l)})},this.renderSovrnAd=function(e,t,r,n){if(e&&t&&r&&n)try{var i=t[idKey],o=creativeStore[i][r+"x"+n].ad;e.write(o),e.close(),e.defaultView&&e.defaultView.frameElement&&(e.defaultView.frameElement.width=r,e.defaultView.frameElement.height=n)}catch(e){}}}function init(e,t){var r=Utils.getProtocol(),n=Math.floor(9e3*Math.random()),i=r+"//gslbeacon.lijit.com/beacon?viewId="+e.viewId+"&rand="+n+"&informer="+e.informer+"&type=fpads&loc="+__pubdomain+"&v=1.2",o=document.createElement("iframe");o.src=i,o.setAttribute("id","sovrn_beacon"),o.setAttribute("margin","0"),o.setAttribute("padding","0"),o.setAttribute("frameborder","0"),o.setAttribute("width","1"),o.setAttribute("height","1"),o.setAttribute("scrolling","no"),o.setAttribute("overflow","hidden");var a=document.getElementsByTagName("script")[0];a.parentElement.appendChild(o);var d=new Partner(e);window.sovrn_load_cb=d.recordSovrnResponse,window.sovrn_render=d.renderSovrnAd,t(null,d)}var PARTNER_ID="SVRN",SUPPORTED_TARGETING_TYPES={page:!1,slot:!0},SUPPORTED_ANALYTICS={time:!0,demand:!0},SUPPORTED_OPTIONS={prefetch:!0,demandExpiry:-1},prefetchState={NEW:1,IN_PROGRESS:2,READY:3,USED:4},Utils=window.headertag.Utils,Network=window.headertag.Network,BidRoundingTransformer=window.headertag.BidRoundingTransformer,__pubdomain=window.location.hostname;window.headertag.registerPartner(PARTNER_ID,init)}),window.headertag.partnerScopes.push(function(){"use strict";function e(e){return"string"==typeof e&&i[e]}function t(t){function r(e){for(var t={},r=0,n=e.length;r<n;r++)if(v.hasOwnProperty(e[r]))for(var i in v[e[r]])if(v[e[r]].hasOwnProperty(i)){var o=v[e[r]][i];t[i]=o}return t}function n(e,t){var r={slotMap:{},xSlotToHt:{}};for(var n in t)if(t.hasOwnProperty(n)){r.slotMap[n]={};for(var i=0;i<t[n].length;i++){var o=t[n][i];r.slotMap[n][o]=e[o].sonobiKey,r.xSlotToHt[o]=n}}return r}function i(e){var t={},r=e.slots;try{for(var n in r){var i=S[n];if(r.hasOwnProperty(n)){t[i]=t[i]||{},t[i].timestamp=s.now(),t[i].demand=t[i].demand||{};for(var o in r[n])r[n].hasOwnProperty(o)&&(t[i].demand.hasOwnProperty(o)?t[i].demand[o].push(r[n][o]):t[i].demand[o]=[r[n][o]])}}}catch(e){}return t}function c(e,t){return function(r){l[e]=r,delete window[t]}}var p=this,f=t.targetingType,u=o,g=a,h={state:d.NEW,correlator:null,slotIds:[],callbacks:[]},m={},y=n(t.xSlots,t.mapping),v=y.slotMap,S=y.xSlotToHt;this.getPartnerTargetingType=function(){return f},this.getSupportedAnalytics=function(){return u},this.getSupportedOptions=function(){return g},this.getPartnerDemandExpiry=function(){return g.demandExpiry},this.setPartnerTargetingType=function(t){return!!e(t)&&(f=t,!0)};var b=function(){var e=0;return function(){var t="_"+e+"_"+(9999*Math.random()|0);return e++,t}}();this.prefetchDemand=function(e,t,n){h.state=d.IN_PROGRESS,h.correlator=e,h.slotIds=t.divIds.slice(),m[e]={},m[e].slot={};var o=r(t.divIds);for(var a in o)if(o.hasOwnProperty(a)&&S.hasOwnProperty(a)){var p=S[a];m[e].slot[p]={}}if(!s.isEmpty(o)){var f=b(),u="sbi_"+f,g=encodeURIComponent(JSON.stringify(o));window[u]=c(f,u);var y="//apex.go.sonobi.com/trinity.js?key_maker="+g+"&cv="+u,v=s.addScriptTag(y,!1,function(){var t=l[f];delete l[f];var r=i(t);for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];if(m[e].slot[o]=m[e].slot[o]||{},m[e].slot[o].timestamp=s.now(),m[e].slot[o].demand=m[e].slot[o].demand||{},a.demand)for(var c in a.demand)a.demand.hasOwnProperty(c)&&(m[e].slot[o].demand.hasOwnProperty(c)?m[e].slot[o].demand[c].push(a.demand[c]):m[e].slot[o].demand[c]=[a.demand[c]])}h.state=d.READY,n(e);for(var p=0,u=h.callbacks.length;p<u;p++)setTimeout(h.callbacks[p],0);v.parentNode.removeChild(v)})}},this.getDemand=function e(t,n,o){if(h.state===d.IN_PROGRESS){for(var a=s.getDivIds(n),f=!1,u=0,y=a.length;u<y;u++){var v=h.slotIds.indexOf(a[u]);v!==-1&&(h.slotIds.splice(v,1),f=!0)}if(f)return void h.callbacks.push(e.bind(p,t,n,o))}var S={slot:{}};if(h.state===d.READY){for(var w=n.length-1;w>=0;w--){var T=n[w].getSlotElementId();m[h.correlator].slot.hasOwnProperty(T)&&((g.demandExpiry<0||s.now()-m[h.correlator].slot[T].timestamp<=g.demandExpiry)&&(S.slot[T]=m[h.correlator].slot[T],n.splice(w,1)),delete m[h.correlator].slot[T])}if(s.validateNonEmptyObject(m[h.correlator].slot)||(h.state=d.USED),!n.length)return void o(null,S)}var I=r(s.getDivIds(n));if(s.isEmpty(I))o(null,S);else{var D=b(),E="sbi_"+D,P=encodeURIComponent(JSON.stringify(I));window[E]=c(D,E);var R="//apex.go.sonobi.com/trinity.js?key_maker="+P+"&cv="+E,x=s.addScriptTag(R,!1,function(){var e=l[D];delete l[D];var t=i(e);for(var r in t)if(t.hasOwnProperty(r)){var n=t[r];if(S.slot[r]=S.slot[r]||{},S.slot[r].timestamp=s.now(),S.slot[r].demand=S.slot[r].demand||{},n.demand)for(var a in n.demand)n.demand.hasOwnProperty(a)&&(S.slot[r].demand.hasOwnProperty(a)?S.slot[r].demand[a].push(n.demand[a]):S.slot[r].demand[a]=[n.demand[a]])}o(null,S),x.parentNode.removeChild(x)})}}}function r(e,r){r(null,new t(e))}var n="SBI",i={page:!1,slot:!0},o={time:!0,demand:!0},a={prefetch:!0,demandExpiry:-1},d={NEW:1,IN_PROGRESS:2,READY:3,USED:4},s=window.headertag.Utils,l={};window.headertag.registerPartner(n,r)}),window.headertag.partnerScopes.push(function(){"use strict";function e(e){return"string"==typeof e&&i[e]}function t(e,t){window.ybotq=window.ybotq||[];var n="//cdn.yldbt.com/js/yieldbot.intent.js";s.addScriptTag(n,!0,function(){}),t(null,new r(e))}function r(t){function r(){for(var e in t.mapping)if(t.mapping.hasOwnProperty(e)){g.demand.slot[e]={timestamp:s.now(),demand:{}};for(var r=0;r<t.mapping[e].length;r++){var n=t.mapping[e][r],i=t.xSlots[n].id,o=window.yieldbot.getSlotCriteria(i);for(var a in o)if(o.hasOwnProperty(a)){"ybot_cpm"===a&&(o[a]=y.transformBid(o[a]));var d=a;v.hasOwnProperty(a)&&(d=v[a]),g.demand.slot[e].demand[d]||(g.demand.slot[e].demand[d]=[]),g.demand.slot[e].demand[d].push(o[a])}}}}function n(e){for(var t={slot:{}},r=0;r<e.length;r++){var n=e[r].getId();g.demand.slot.hasOwnProperty(n)&&(t.slot[n]=g.demand.slot[n])}return t}var i,c=this,p=t.targetingType,f=o,u=a,g={state:d.NEW,demand:{slot:{}},callbacks:[]};s.isString(window.headertagconfig.deviceTypeRef)?i=window.headertagconfig.deviceTypeRef:s.isFunction(window.headertagconfig.deviceTypeRef)&&(i=window.headertagconfig.deviceTypeRef());var h;if(!t.pub.hasOwnProperty(i))throw new Error("pubId not found for device type.");h=t.pub[i];var m=t.roundingBuckets||{floor:0,inputCentsMultiplier:1,outputCentsDivisor:1,outputPrecision:0,roundingType:1,buckets:[{max:2e3,step:5},{max:5e3,step:100}]},y=l(m),v={ybot_ad:"ybot_ad",ybot_size:"ybot_size",ybot_cpm:"ybot_cpm",ybot_slot:"ybot_slot"};t.targetKeyOverride&&(t.targetKeyOverride.ybot_ad&&(v.ybot_ad=t.targetKeyOverride.ybot_ad),t.targetKeyOverride.ybot_size&&(v.ybot_size=t.targetKeyOverride.ybot_size),t.targetKeyOverride.ybot_cpm&&(v.ybot_cpm=t.targetKeyOverride.ybot_cpm),t.targetKeyOverride.ybot_slot&&(v.ybot_slot=t.targetKeyOverride.ybot_slot)),window.ybotq.push(function(){window.yieldbot.pub(h);for(var e in t.xSlots)if(t.xSlots.hasOwnProperty(e)){var r=t.xSlots[e];window.yieldbot.defineSlot(r.id,{sizes:r.sizes})}window.yieldbot.enableAsync()}),this.getPartnerTargetingType=function(){return p},this.getSupportedAnalytics=function(){return f},this.getSupportedOptions=function(){return u},this.getPartnerDemandExpiry=function(){return u.demandExpiry},this.setPartnerTargetingType=function(t){return!!e(t)&&(p=t,!0)},this.prefetchDemand=function(e,t,n){g.state===d.NEW&&(g.state=d.IN_PROGRESS,window.ybotq.push(function(){window.yieldbot.go()}),window.ybotq.push(function(){r(),g.state=d.READY,n(e);for(var t=0,i=g.callbacks.length;t<i;t++)setTimeout(g.callbacks[t],0)}))},this.getDemand=function e(t,i,o){g.state===d.NEW?(g.state=d.IN_PROGRESS,window.ybotq.push(function(){window.yieldbot.go()}),window.ybotq.push(function(){r(),g.state=d.READY,o(null,n(i));for(var e=0,t=g.callbacks.length;e<t;e++)setTimeout(g.callbacks[e],0)})):g.state===d.IN_PROGRESS?g.callbacks.push(e.bind(c,t,i,o)):g.state===d.READY&&o(null,n(i))}}var n="YBOT",i={page:!1,slot:!0},o={time:!0,demand:!1},a={prefetch:!0,demandExpiry:-1},d={NEW:1,IN_PROGRESS:2,READY:3},s=window.headertag.Utilities,l=window.headertag.BidRoundingTransformer;window.headertag.registerPartner(n,t)}),function(){"use strict";function e(e){function o(e){e=e.slice();for(var t=e.length-1;t>=0;t--){var n;if(n=r.isString(e[t])?e[t]:e[t].getSlotElementId(),j.hasOwnProperty(n)){var i=j[n];i.getDeviceType()&&i.getDeviceType()!==K()&&e.splice(t,1)}}return e}function a(e,t){if(e&&!r.isEmpty(e))for(var n=r.getDivIdToGSlotMap(t),i=0;i<e.length;i++){var o=e[i];if(o.page)for(var a in o.page)o.page.hasOwnProperty(a)&&(window.googletag.pubads().setTargeting(a,o.page[a]),O.page[a]=!0);else for(var d in o.slot)if(o.slot.hasOwnProperty(d)&&n.hasOwnProperty(d)){var s=o.slot[d].demand;for(var l in s)s.hasOwnProperty(l)&&(n[d].setTargeting(l,s[l]),O.slot[d]=O.slot[d]||{},O.slot[d][l]=!0)}}}function d(e){for(var t in O.page)O.page.hasOwnProperty(t)&&(window.googletag.pubads().clearTargeting(t),delete O.page[t]);for(var r=0;r<e.length;r++){var n=e[r].getSlotElementId();if(O.slot.hasOwnProperty(n)){for(var i in O.slot[n])O.slot[n].hasOwnProperty(i)&&e[r].setTargeting(i,"");delete O.slot[n]}}}function s(e,n,i){var o=t.defer();i=i.slice();var a=null,d=!1,s=P[n].getPartnerTargetingType(),l=function(t,i){return I[e]!==D.DONE&&!d&&(clearTimeout(a),P[n].getSupportedAnalytics().time&&T.stopPartnerTimer(e,n),t?(o.resolve(),!0):r.isEmpty(i)?(o.resolve(),!0):(P[n].getSupportedAnalytics().demand&&T.recordReturnedDemand(e,n,s,i),o.resolve(i),!0))};x[n]&&(a=setTimeout(function(){d=!0,o.resolve()},x[n])),P[n].getSupportedAnalytics().time&&T.startPartnerTimer(e,n,x[n]);try{"page"===s?P[n].getDemand(e,z,l):P[n].getDemand(e,i,l)}catch(e){}return o}function l(e,t){for(var r={selectedHtSlots:[],htSlotToGSlotMap:{}},n=0;n<B.length;n++){var o=B[n],a=i[o](e,t);r.selectedHtSlots=r.selectedHtSlots.concat(a.selectedHtSlots);for(var d in a.htSlotToGSlotMap)a.htSlotToGSlotMap.hasOwnProperty(d)&&(r.htSlotToGSlotMap[d]=a.htSlotToGSlotMap[d])}return r}function c(e,n){var i=t.defer();I[e]=D.IN_PROGRESS;var a=[],d=[];n=n.slice();var c=o(C),p=l(c,n);if(!p.selectedHtSlots.length)return i.resolve(),i.promise;T.startSessionTimer(e);for(var f=Object.keys(P);f.length;){var u=r.randomSplice(f);if(!R[u]){var g=s(e,u,p.selectedHtSlots);a.push(g),d.push(g.promise)}}var h=null,m=!1;return E&&(h=setTimeout(function(){m=!0;for(var e=0;e<a.length;e++)a[e].resolve()},E)),t.all(d).then(function(t){m||clearTimeout(h),I[e]=D.DONE,T.stopSessionTimer(e);var r=[];t.map(function(e){if(e)if(e.page)r.push(e);else{var t=e.slot,n={slot:{}};for(var i in t)if(t.hasOwnProperty(i)){var o=p.htSlotToGSlotMap[i];n.slot[o]=t[i]}r.push(n)}}),i.resolve(r)}),i.promise}function p(e){q?q(e):window.googletag.display(e)}function f(e,t){U?U(e,t):window.googletag.pubads().refresh(e,t)}function u(e){G?G(e):window.googletag.destroySlots(e)}function g(t,n){function i(n,i){if((!n||i)&&(P[t]=i,R[t]=e.partners[t].disabled,x[t]=e.partners[t].timeout,!R[t]&&!_&&e.prefetch&&e.prefetch.enabled)){var d=[],s=window.headertag.pagetype;if(s&&e.prefetch.pageTypeMapping.hasOwnProperty(s)?d=e.prefetch.pageTypeMapping[s]:e.prefetch.defaultSet&&(d=e.prefetch.defaultSet),d=o(d),d&&d.length){var l=i.getSupportedOptions();if(l.prefetch&&a.prefetchEnabled){var c=r.generateCorrelator();T.startSessionTimer(c),T.startPartnerTimer(c,t,x[t]);var p=function(){T.stopPartnerTimer(c,t),T.stopSessionTimer(c),T.sendReport(c)},f={divIds:d};"page"===i.getPartnerTargetingType()?i.prefetchDemand(c,z,p):i.prefetchDemand(c,f,p)}}}}var a=e.partners[t];if(e.partners.hasOwnProperty(t))try{n(a,i)}catch(e){}}function h(e){if(!A)return p(e);if(_=!0,!document.getElementById(e)||!r.divIdToGSlot(e))return p(e);var t;if(M){t=r.getSlots();for(var n=t.length-1;n>=0;n--)N.hasOwnProperty(t[n].getSlotElementId())&&t.splice(n,1)}else{var i=r.divIdToSlot(e);t=i?[i]:[]}for(var o=t.length-1;o>=0;o--)document.getElementById(t[o].getSlotElementId())||t.splice(o,1);if(t.length&&!N.hasOwnProperty(e)){for(var s=0;s<t.length;s++)N[t[s].getSlotElementId()]=!0;var l=r.generateCorrelator();c(l,t).then(function(r){d(t),a(r,t),p(e)}).then(function(){T.sendReport(l)}).catch(function(e){})}}function m(e,t,r,n){var i=googletag.defineSlot(e,t,r).addService(googletag.pubads());n&&i.setClickUrl(n),h(r)}function y(e,t){A||(_=!0),e||(e=r.getSlots());for(var n=e.length-1;n>=0;n--)document.getElementById(e[n].getSlotElementId())||e.splice(n,1);if(z=window.googletag.pubads().getCorrelator(),!e.length)return f(e,t);var i=r.generateCorrelator();c(i,e).then(function(r){d(e),a(r,e),f(e,t)}).then(function(){T.sendReport(i)}).catch(function(e){})}function v(){return{display:m.bind(b),refresh:y.bind(b)}}function S(e){e||(e=r.getSlots());for(var t=0;t<e.length;t++){var n=e[t].getSlotElementId();delete N[n]}u(e)}var b,w,T,I,D,E,P,R,x,O,_,A,M,N,q,k,U,G,K,C,j,B,z;!function(){if(e.hasOwnProperty("siteId")?r.isInteger(e.siteId)&&r.isInRange(e.siteId,0)||(e.siteId=0):e.siteId=0,e.hasOwnProperty("timeout")?r.isInteger(e.timeout)&&r.isInRange(e.timeout,1)||(e.timeout=1e3):e.timeout=1e3,e.hasOwnProperty("disableInitialLoad")?r.isBoolean(e.disableInitialLoad)||(e.disableInitialLoad=!1):e.disableInitialLoad=!1,e.hasOwnProperty("enableSingleRequest")?r.isBoolean(e.enableSingleRequest)||(e.enableSingleRequest=!0):e.enableSingleRequest=!0,e.hasOwnProperty("deviceTypeRef")?r.isString(e.deviceTypeRef)||r.isFunction(e.deviceTypeRef)||(e.deviceTypeRef=r.getDeviceTypeByUserAgent):e.deviceTypeRef=r.getDeviceTypeByUserAgent,!r.isObject(e.partners))throw new Error("Invalid `config.partners`, must be an object");if(!e.partners.hasOwnProperty("INDX"))throw new Error("Invalid `config.partners`, must include INDX");for(var t in e.partners)if(e.partners.hasOwnProperty(t)){var o=e.partners[t];o.hasOwnProperty("disabled")?r.isBoolean(o.disabled)||(o.disabled=!0):o.disabled=!1,o.hasOwnProperty("timeout")?r.isInteger(o.timeout)&&r.isInRange(o.timeout,0)||(o.timeout=0):o.timeout=0,o.hasOwnProperty("prefetchEnabled")?r.isBoolean(o.prefetchEnabled)||(o.prefetchEnabled=!1):o.prefetchEnabled=!1}b=this,w=e.siteId,T=new n(w),I={},D={IN_PROGRESS:0,DONE:1},E=e.timeout,P={},R={},x={},O={page:{},slot:{}},_=!1,A=!e.disableInitialLoad,M=e.enableSingleRequest,N={};var a=function(){window.googletag.cmd.push(function(){e.overrideGoogletag&&(q=window.googletag.display,k=window.googletag.pubads().display.bind(window.googletag.pubads()),U=window.googletag.pubads().refresh.bind(window.googletag.pubads()),G=window.googletag.destroySlots,window.googletag.display=h,window.googletag.pubads().display=m,window.googletag.pubads().refresh=y,window.googletag.destroySlots=S)})};r.isArray(window.googletag.cmd)?window.googletag.cmd.unshift(a):window.googletag.cmd.push(a),C=[],j={};for(var d in e.htSlots)if(e.htSlots.hasOwnProperty(d)){var s=e.htSlots[d];for(var l in s)if(s.hasOwnProperty(l)){var c=e.htSlots[d][l];c.deviceType=d;var p=i(l,c);C.push(p),j[l]=p}}B=e.slotMappingTypes,K=e.deviceTypeRef,r.isString(e.deviceTypeRef)&&(K=function(){return e.deviceTypeRef}),z=0}(),this.apiReady=!0,this.version="1.5.8",this.registerPartner=g,this.display=h,this.pubads=v,this.destroySlots=S}var t=window.headertag.Promise,r=window.headertag.Utilities,n=window.headertag.HeaderStats,i=window.headertag.HeaderTagSlot;window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[];try{var o=new e(window.headertagconfig);for(var a in window.headertag)window.headertag.hasOwnProperty(a)&&"display"!==a&&"pubads"!==a&&(o[a]=window.headertag[a]);window.headertag=o;for(var d=0;d<window.headertag.partnerScopes.length;d++)try{window.headertag.partnerScopes[d]()}catch(e){}}catch(e){window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.headertag=window.googletag}}();
